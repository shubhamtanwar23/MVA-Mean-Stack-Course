var app=angular.module("chirpApp",["ngRoute","ngResource"]).run(function(e,t){e.authenticated=!1,e.current_user="",e.logged_out=!1,e.signout=function(){e.authenticated=!1,e.current_user="",e.logged_out=!0,t.path("/")}});app.config(function(e){e.when("/",{templateUrl:"main.html",controller:"mainController"}).when("/login",{templateUrl:"login.html",controller:"authController"}).when("/register",{templateUrl:"register.html",controller:"authController"})}),app.factory("postService",function(e){return e("/api/posts/:id")}),app.controller("mainController",["$scope","$rootscope","$http","postService",function(e,t,r,o){e.posts=o.query(),e.newPost={created_by:"",text:"",created_at:""},e.post=function(){e.newPost.created_by=t.current_user,e.newPost.created_at=Date.now(),o.save(e.newPost,function(){e.posts=o.query(),e.newPost={created_by:"",text:"",created_at:""}})}}]),app.controller("authController",["$scope","$http","$rootscope","$location",function(e,t,r,o){e.user={username:"",password:""},e.error_message="",e.login=function(){t.post("/auth/login",e.user).success(function(t){"success"==t.state?(r.authenticated=!0,r.current_user=t.user.username,r.logged_out=!1,o.path("/")):e.error_message=t.message})},e.register=function(){t.post("/auth/signup",e.user).success(function(t){"success"==t.state?(r.authenticated=!0,r.current_user=t.user.username,r.logged_out=!1,o.path("/")):e.error_message=t.message})}}]);